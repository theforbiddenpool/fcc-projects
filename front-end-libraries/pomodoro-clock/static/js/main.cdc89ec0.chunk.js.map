{"version":3,"sources":["components/Display.js","components/Controls.js","components/Timer.js","hooks/useAccurateInterval.js","App.js","index.js"],"names":["Display","label","secondsLeft","className","id","time","minutes","Math","floor","seconds","formatForPreecidingZero","number","clockify","LengthControl","length","handleChange","class","data-value","onClick","TimerControls","handleStartStop","isIntervalRunning","handleReset","Timer","useState","breakLength","setBreakLength","sessionLength","setSessionLength","setSecondsLeft","setLabel","beepSound","useRef","fn","interval","isRunning","setIsRunning","savedCallback","timeout","expected","useEffect","current","Date","now","setTimeout","tick","drift","max","clearTimeout","startInterval","stopInterval","useAccurateInterval","isLengthValid","num","currentLength","useLayoutEffect","play","e","parseInt","currentTarget","dataset","value","pause","currentTime","ref","src","App","ReactDOM","render","document","getElementById"],"mappings":"4MAEaA,EAAU,SAAC,GAA4B,IAA1BC,EAAyB,EAAzBA,MAAOC,EAAkB,EAAlBA,YAY/B,OACE,yBAAKC,UAAU,iBACb,wBAAIC,GAAG,eAAgBH,GACvB,uBAAGG,GAAG,aAdV,WAAuC,IAArBC,EAAoB,uDAAbH,EACjBI,EAAUC,KAAKC,MAAMH,EAAO,IAC5BI,EAAUJ,EAAO,GAEvB,SAASK,EAAwBC,GAC/B,OAAQA,EAAS,GAAV,WAAoBA,GAAWA,EAGxC,MAAM,GAAN,OAAUD,EAAwBJ,GAAlC,YAA8CI,EAAwBD,IAMhDG,CAASV,M,OCdtBW,EAAgB,SAAC,GAAD,IAAGT,EAAH,EAAGA,GAAIH,EAAP,EAAOA,MAAOa,EAAd,EAAcA,OAAQC,EAAtB,EAAsBA,aAAtB,OAC3B,yBAAKZ,UAAU,kBACb,wBAAIC,GAAE,UAAMA,EAAN,UAAmBY,MAAM,iBAAkBf,GACjD,yBAAKE,UAAU,YACb,4BAAQc,aAAW,KAAKb,GAAE,UAAMA,EAAN,cAAuBc,QAAUH,GACzD,2BAAG,kBAAC,IAAD,QAEL,0BAAMX,GAAE,UAAMA,EAAN,YAAsBU,GAC9B,4BAAQG,aAAW,IAAIb,GAAE,UAAMA,EAAN,cAAuBc,QAAUH,GACxD,2BAAG,kBAAC,IAAD,WAMEI,EAAgB,SAAC,GAAD,IAAGC,EAAH,EAAGA,gBAAiBC,EAApB,EAAoBA,kBAAmBC,EAAvC,EAAuCA,YAAvC,OAC3B,yBAAKnB,UAAU,kBACb,4BAAQC,GAAG,aAAac,QAAUE,GAChC,2BACIC,EAAoB,kBAAC,IAAD,MAAc,kBAAC,IAAD,QAGxC,4BAAQjB,GAAG,QAAQc,QAAUI,GAC3B,2BAAG,kBAAC,IAAD,UCpBIC,EAAQ,WAAO,IAAD,EACaC,mBAAS,GADtB,mBAClBC,EADkB,KACLC,EADK,OAEiBF,mBAAS,IAF1B,mBAElBG,EAFkB,KAEHC,EAFG,OAGaJ,mBAAyB,GAAhBG,GAHtB,mBAGlBzB,EAHkB,KAGL2B,EAHK,OAICL,mBAAS,WAJV,mBAIlBvB,EAJkB,KAIX6B,EAJW,KAMnBC,EAAYC,iBAAO,MANA,ECJQ,SAACC,GAAyB,IAArBC,EAAoB,uDAAT,IAAS,EACtBV,oBAAS,GADa,mBAClDW,EADkD,KACvCC,EADuC,KAEpDC,EAAgBL,mBAChBM,EAAUN,mBACVO,EAAWP,mBAyBjB,OAvBAQ,qBAAU,WACRH,EAAcI,QAAUR,KAG1BO,qBAAU,WAgBR,OANGL,IACDI,EAASE,QAAUC,KAAKC,MAAQT,EAEhCI,EAAQG,QAAUG,YAZpB,SAASC,IACP,IAAMC,EAAQJ,KAAKC,MAAQJ,EAASE,QAEpCJ,EAAcI,UAEdF,EAASE,SAAWP,EACpBI,EAAQG,QAAUG,WAAWC,EAAMtC,KAAKwC,IAAI,EAAGb,EAASY,MAMrBZ,IAG9B,kBAAMc,aAAaV,EAAQG,YACjC,CAACN,EAAWD,IAER,CACLe,cAAe,kBAAMb,GAAa,IAClCc,aAAc,kBAAMd,GAAa,IACjCf,kBAAmBc,GDpBsCgB,EAAoB,kBAAMtB,EAAe3B,EAAc,MAA1G+C,EARiB,EAQjBA,cAAeC,EARE,EAQFA,aAAc7B,EARZ,EAQYA,kBA6CrC,SAAS+B,EAAcC,EAAKC,GAC1B,OAASD,EAAM,GAAKC,EAAgB,IAAQD,EAAM,GAAKC,EAAgB,EAmBzE,OA9DAC,2BAAgB,WACXlC,IAEU,YAAVpB,EACD4B,EAA+B,GAAhBF,GACG,UAAV1B,GACR4B,EAA6B,GAAdJ,MAEhB,CAACE,EAAeF,IAoBnBe,qBAAU,WACLtC,GAAe,IAChB6B,EAAUU,QAAQe,OAEL,YAAVvD,GACD4B,EAA6B,GAAdJ,GACfK,EAAS,UACS,UAAV7B,IACR4B,EAA+B,GAAhBF,GACfG,EAAS,eAGZ,CAAC5B,IAuBF,8BACE,6BAASC,UAAU,wBACjB,kBAAC,EAAD,CAAeC,GAAG,QAAQH,MAAM,eAAea,OAASW,EAAcV,aAnB5E,SAA2B0C,GACzB,IAAGpC,EAAH,CAEA,IAAMgC,EAAMK,SAASD,EAAEE,cAAcC,QAAQC,MAAO,IAChDT,EAAcC,EAAK5B,IACvBC,EAAeD,EAAc4B,OAezB,kBAAC,EAAD,CAAejD,GAAG,UAAUH,MAAM,iBAAiBa,OAASa,EAAgBZ,aAZlF,SAA6B0C,GAC3B,IAAGpC,EAAH,CAEA,IAAMgC,EAAMK,SAASD,EAAEE,cAAcC,QAAQC,MAAO,IAChDT,EAAcC,EAAK1B,IACvBC,EAAiBD,EAAgB0B,QAS/B,6BAASlD,UAAU,SACjB,kBAAC,EAAD,CAASF,MAAQA,EAAQC,YAAcA,IACvC,kBAAC,EAAD,CAAekB,gBA5DrB,WACKC,EACD6B,IAEAD,KAwD+C5B,kBAAoBA,EAAoBC,YApD3F,WACE4B,IACApB,EAAS,WACTD,EAA+B,GAAhBF,GACfI,EAAUU,QAAQqB,QAClB/B,EAAUU,QAAQsB,YAAc,EAChCnC,EAAiB,IACjBF,EAAe,MA8CX,2BAAOsC,IAAKjC,EAAW3B,GAAG,OAAO6D,IAAI,6BE1E9BC,EATH,kBACV,yBAAK/D,UAAU,gBACb,gCACE,+CAEF,kBAAC,EAAD,QCNJgE,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,U","file":"static/js/main.cdc89ec0.chunk.js","sourcesContent":["import React from 'react'\n\nexport const Display = ({ label, secondsLeft }) => {\n  function clockify(time = secondsLeft) {\n    const minutes = Math.floor(time / 60)\n    const seconds = time % 60\n\n    function formatForPreecidingZero(number) {\n      return (number < 10) ? `0${number}` : number\n    }\n\n    return `${formatForPreecidingZero(minutes)}:${formatForPreecidingZero(seconds)}`\n  }\n\n  return (\n    <div className=\"timer-display\">\n      <h2 id=\"timer-label\">{ label }</h2>\n      <p id=\"time-left\">{ clockify(secondsLeft) }</p>\n    </div>\n  )\n}","import React from 'react'\nimport { FaMinus, FaPlus, FaPause, FaPlay, FaUndo } from 'react-icons/fa'\n\nexport const LengthControl = ({ id, label, length, handleChange }) => (\n  <div className=\"length-control\">\n    <h2 id={ `${id}-label` } class=\"control-label\">{ label }</h2>\n    <div className=\"controls\">\n      <button data-value=\"-1\" id={ `${id}-decrement` } onClick={ handleChange }>\n        <i><FaMinus /></i>\n      </button>\n      <span id={ `${id}-length` }>{ length }</span>\n      <button data-value=\"1\" id={ `${id}-increment` } onClick={ handleChange }>\n        <i><FaPlus /></i>\n      </button>\n    </div>\n  </div>\n)\n\nexport const TimerControls = ({ handleStartStop, isIntervalRunning, handleReset }) => (\n  <div className=\"timer-controls\">\n    <button id=\"start_stop\" onClick={ handleStartStop }>\n      <i>\n        { isIntervalRunning ? <FaPause /> : <FaPlay /> }\n      </i>\n    </button>\n    <button id=\"reset\" onClick={ handleReset }>\n      <i><FaUndo /></i>\n    </button>\n  </div>\n)","import React, { useState, useEffect, useRef, useLayoutEffect } from 'react'\n\nimport { useAccurateInterval } from '../hooks/useAccurateInterval'\nimport { Display } from './Display'\nimport { LengthControl, TimerControls } from './Controls'\n\nexport const Timer = () => {\n  const [breakLength, setBreakLength] = useState(5)\n  const [sessionLength, setSessionLength] = useState(25)\n  const [secondsLeft, setSecondsLeft] = useState(sessionLength * 60) // 25 minutes\n  const [label, setLabel] = useState('Session')\n\n  const beepSound = useRef(null)\n  \n  const { startInterval, stopInterval, isIntervalRunning } = useAccurateInterval(() => setSecondsLeft(secondsLeft - 1))\n\n  // I'm using layoutEffect here because otherwise it won't pass the FCC tests\n  useLayoutEffect(() => {\n    if(isIntervalRunning) return\n\n    if(label === 'Session') {\n      setSecondsLeft(sessionLength * 60)\n    } else if(label === 'Break') {\n      setSecondsLeft(breakLength * 60)\n    }\n  }, [sessionLength, breakLength])\n\n  function startStop() {\n    if(isIntervalRunning) {\n      stopInterval()\n    } else {\n      startInterval()\n    }\n  }\n\n  function reset() {\n    stopInterval()\n    setLabel('Session')\n    setSecondsLeft(sessionLength * 60)\n    beepSound.current.pause()\n    beepSound.current.currentTime = 0\n    setSessionLength(25)\n    setBreakLength(5)\n  }\n\n  useEffect(() => {\n    if(secondsLeft <= 0) {\n      beepSound.current.play()\n\n      if(label === 'Session') {\n        setSecondsLeft(breakLength * 60)\n        setLabel('Break')\n      } else if(label === 'Break') {\n        setSecondsLeft(sessionLength * 60)\n        setLabel('Session')\n      }\n    }\n  }, [secondsLeft])\n\n  function isLengthValid(num, currentLength) {\n    return ((num > 0 && currentLength < 60) || (num < 0 && currentLength > 1))\n  }\n\n  function handleBreakChange(e) {\n    if(isIntervalRunning) return\n\n    const num = parseInt(e.currentTarget.dataset.value, 10)\n    if(!isLengthValid(num, breakLength)) return\n    setBreakLength(breakLength + num)\n  }\n  \n  function handleSessionChange(e) {\n    if(isIntervalRunning) return\n\n    const num = parseInt(e.currentTarget.dataset.value, 10)\n    if(!isLengthValid(num, sessionLength)) return\n    setSessionLength(sessionLength + num)\n  }\n  \n  return (\n    <main>\n      <section className=\"timerlength-controls\">\n        <LengthControl id=\"break\" label=\"Break Length\" length={ breakLength } handleChange={ handleBreakChange } />\n        <LengthControl id=\"session\" label=\"Session Length\" length={ sessionLength } handleChange={ handleSessionChange } />\n      </section>\n      <section className=\"timer\">\n        <Display label={ label } secondsLeft={ secondsLeft } />\n        <TimerControls handleStartStop={ startStop } isIntervalRunning={ isIntervalRunning } handleReset={ reset } />\n        <audio ref={beepSound} id=\"beep\" src=\"https://goo.gl/65cBl1\"></audio>\n      </section>\n    </main>\n  )\n}\n","import { useState, useEffect, useRef } from 'react'\n\nexport const useAccurateInterval = (fn, interval = 1000) => {\n  const [ isRunning, setIsRunning ] = useState(false)\n  const savedCallback = useRef()\n  const timeout = useRef()\n  const expected = useRef()\n  \n  useEffect(() => {\n    savedCallback.current = fn\n  })\n\n  useEffect(() => {\n    function tick() {\n      const drift = Date.now() - expected.current\n\n      savedCallback.current()\n\n      expected.current += interval\n      timeout.current = setTimeout(tick, Math.max(0, interval-drift))\n    }\n\n    if(isRunning) {\n      expected.current = Date.now() + interval\n\n      timeout.current = setTimeout(tick, interval)\n    }\n\n    return () => clearTimeout(timeout.current)\n  }, [isRunning, interval])\n\n  return { \n    startInterval: () => setIsRunning(true),\n    stopInterval: () => setIsRunning(false),\n    isIntervalRunning: isRunning,\n  }\n}\n","import React, { useState } from 'react';\nimport './App.scss';\n\nimport { Timer } from './components/Timer';\n\nconst App = () =>  (\n  <div className=\"page-wrapper\">\n    <header>\n      <h1>Pomodoro Clock</h1>\n    </header>\n    <Timer />\n  </div>\n)\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}